{% extends "home_base.html" %}

{% load static %}
{% block css_files %}

{% endblock %}

{% block main %}
<main class="main-wrapper">

    <!-- Header Start -->
    {% block header %}
    {% include 'home_page_partials/main_header.html' %}
    {% endblock  %}
    <!-- Header End -->

    <!-- Banner Start -->
    {% block banner %}
    <div class="page-banner bg-color-05">
        <div class="page-banner__wrapper">
            <div class="container">
                <!-- Page Banner Caption Start -->
                <div class="page-banner__caption text-center">
                    <h2 class="page-banner__main-title">GET IN TOUCH</h2>
                </div>
                <!-- Page Banner Caption End -->
            </div>
        </div>
    </div>
    {% endblock  %}
    <!-- Banner End -->

    <!-- Offcanvas Start -->
    {% block offcanvas %}
    {% include "home_page_partials/offcanvas.html" %}
    {% endblock  %}
    <!-- Offcanvas End -->

    <!-- Contact us Section Start -->
    <div class="contact-section">
        <div class="container custom-container">

            <div class="section-padding-02">
                <div class="row gy-8 justify-content-between">
                    <div class="col-lg-4">
                        <!-- Contact Info Start -->
                        <div class="contact-info">
                            <!-- Section Title Start -->
                            <div class="section-title text-center text-lg-start" data-aos="fade-up" data-aos-duration="1000">
                                <h2 class="section-title__title-02">Keep In Touch <br> With Us.</h2>
                            </div>
                            <!-- Section Title End -->

                            <div class="contact-info__wrapper" data-aos="fade-up" data-aos-duration="1000">
                                <!-- Contact Info Start -->
                                <div class="contact-info__item-02 text-center text-lg-start">
                                    <div class="d-lg-flex gap-4 mb-4">
                                        <div class="contact-info__icon">
                                            <i class="fas fa-map-marker-alt"></i>
                                        </div>
                                        <div class="contact-info__content">
                                            <h3 class="contact-info__title">Address</h3>
                                        </div>
                                    </div>
                                    <p>Dagmada Wada Jir, Mogadishu</p>
                                </div>
                                <!-- Contact Info End -->

                                <!-- Contact Info Start -->
                                <div class="contact-info__item-02 text-center text-lg-start">
                                    <div class="d-lg-flex gap-4 mb-4">
                                        <div class="contact-info__icon">
                                            <i class="fas fa-mobile-alt"></i>
                                        </div>
                                        <div class="contact-info__content">
                                            <h3 class="contact-info__title">Phone</h3>
                                        </div>
                                    </div>
                                    <p>Mobile: <strong> (+252) - 615 - 272255</strong></p>
                                </div>
                                <!-- Contact Info End -->

                                <!-- Contact Info Start -->
                                <div class="contact-info__item-02 text-center text-lg-start">
                                    <div class="d-lg-flex gap-4 mb-4">
                                        <div class="contact-info__icon">
                                            <i class="fas fa-comment"></i>
                                        </div>
                                        <div class="contact-info__content">
                                            <h3 class="contact-info__title">Email</h3>
                                        </div>
                                    </div>
                                    <p>gaavshiineq@gmail.com</p>
                                    <p>admin@skillup24.com</p>
                                </div>
                                <!-- Contact Info End -->
                            </div>
                        </div>
                        <!-- Contact Info End -->
                    </div>
                    <div class="col-lg-7">
                        <!-- Contact Map Start -->
                        <div class="contact-map-02" data-aos="fade-up" data-aos-duration="1000">
                            <iframe 
                                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3976.5797548741036!2d45.2713817!3d2.0201184!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3d586a1267a6f12f%3A0x48cba8a71d4b982e!2sDagmada%20Wada%20Jir%2C%20Mogadishu!5e0!3m2!1sen!2sso!4v1692401654841!5m2!1sen!2sso"
                                width="100%"
                                height="450"
                                style="border:0;"
                                allowfullscreen=""
                                loading="lazy"
                                referrerpolicy="no-referrer-when-downgrade">
                            </iframe>
                        </div>
                        <!-- Contact Map End -->
                    </div>
                </div>
            </div>

            <div class="section-padding-01">
                <div class="row justify-content-between">
                    <div class="col-lg-4">
                        <!-- Section Title Start -->
                        <div class="section-title text-center text-lg-start" data-aos="fade-up" data-aos-duration="1000">
                            <h2 class="section-title__title-02">Send a Message</h2>
                        </div>
                        <!-- Section Title End -->
                    </div>
                    <div class="col-lg-7">
                        <!-- Contact Form Wrapper Start -->
                        <div class="contact-form__wrapper" data-aos="fade-up" data-aos-duration="1000">
                            <form id="contactForm" method="POST" onsubmit="replaceSubmitIconWithSpinner(this);">
                                {% csrf_token %}
                                <div class="row gy-4">
                                    <div class="col-md-6">
                                        <div class="contact-form__input">
                                            <input class="form-control" type="text" name="name" placeholder="Your name" required>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="contact-form__input">
                                            <input class="form-control" type="email" name="email" placeholder="Email" required>
                                        </div>
                                    </div>
                                    <div class="col-md-12">
                                        <div class="contact-form__input">
                                            <textarea class="form-control" name="message" placeholder="Message" required></textarea>
                                        </div>
                                    </div>
                                    <div class="col-md-12">
                                        <div class="contact-form__input text-center">
                                            <button class="btn btn-primary btn-hover-secondary" type="submit">
                                                <i class="fas fa-paper-plane" id="submit-icon"></i>
                                                <i class="fas fa-spinner fa-spin" id="submit-spinner-icon" style="display: none;"></i>
                                                Submit
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <!-- Contact Form Wrapper End -->
                    </div>
                </div>
            </div>

        </div>
    </div>
    <!-- Contact us Section End -->

    <!-- Footer Start -->
    {% block footer %}
    {% include 'home_page_partials/main_footer.html' %}
    {% endblock  %}
    <!-- Footer End -->
    
    {% include "home_page_partials/arrow_up_down.html" %}

    <script>
        function replaceSubmitIconWithSpinner(button) {
            // Hide the submit icon
            document.getElementById('submit-icon').style.display = 'none';
            // Show the spinner icon
            document.getElementById('submit-spinner-icon').style.display = 'inline-block';
        }
    
        document.getElementById('contactForm').addEventListener('submit', function(event) {
            event.preventDefault();
        
            const formData = new FormData(this);
        
            fetch("{% url 'home_page_app:contact' %}", {
                method: 'POST',
                body: formData,
                headers: {
                    'X-CSRFToken': '{{ csrf_token }}',
                    'X-Requested-With': 'XMLHttpRequest'
                }
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    alert('Your message has been sent successfully!');
                    window.location.href = "{% url 'home_page_app:home' %}";
                } else {
                    alert('Failed to send your message. Please try again.');
                    location.reload();
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('An error occurred while sending your message.');
            });
        });
    </script>
    

</main>
{% endblock %}
